### 12.1 字符设备程序概念

u-boot 的任务是启动内核，内核的任务是启动应用程序。  
应用程序肯定会涉及很多的文件操作(读写配置文件)和硬件相关(输出数据到屏幕，捕捉键盘的事件)的操作。

操作硬件这一块，对于写应用程序的人说，驱动程序应该对他们屏蔽硬件细节。比如说访问点亮一个 led 灯，应用程序不需要了解到硬件电路怎么接的，他们只需要向操作普通文件一样操作驱动节点即可。

最简单的实现方式，驱动中有对应的标准 IO 函数和 C 库中的标准接口对应：

app:    open        read        write
         |           |           |
drv:  led_open    led_read    led_wirte

那这个对应关系是怎么实现的呢？

1. app调用c库中open()函数
2. swi+open系统调用的值进入内核态调用 sys_open 系统调用
3. sys_open 中根据打开文件的类型和主设备号找到驱动的 led_open 函数
